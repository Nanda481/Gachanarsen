# Gacha Web Template (Vercel-ready)

This project contains a ready-to-deploy static frontend plus a simple Vercel serverless API (`/api/download.js`) implementing temporary single-use download tokens (in-memory demo). Edit the placeholder URLs/assets (YouTube URL, 6 download links, images, music) to your own and deploy to Vercel.

---

## File: `index.html`
```html
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gacha Mod Drop</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body class="dark">
  <header class="topbar">
    <div class="logo">YourLogo</div>
    <div class="controls">
      <button id="subscribeBtn" class="btn outline">Subscribe (Open Channel)</button>
      <button id="gachaBtn" class="btn primary" disabled>Gacha</button>
      <button id="muteBtn" class="btn small">ðŸ”Š</button>
    </div>
  </header>

  <main class="wrap">
    <section class="leftpanel">
      <h2>Characters</h2>
      <ul class="navlist">
        <li>Noctoyager</li>
        <li>Hyperborean Empire</li>
        <li>The Elysian Church</li>
        <li>Republic of Luca</li>
        <li>Huaxu</li>
        <li>No Affiliation</li>
      </ul>
    </section>

    <section class="gacha-area">
      <div class="slideshow" id="slideshow">
        <!-- put your background images in /assets/bg1.jpg, bg2.jpg, ... -->
      </div>

      <div class="gacha-stage">
        <div class="tiles" id="tiles">
          <!-- 6 items: edit data-image and data-file attributes later -->
          <div class="tile" data-index="0" data-file="link0" data-name="Mod 1" data-rarity="SSR">
            <div class="tile-inner"><img src="/assets/placeholder1.jpg" alt="mod1"></div>
          </div>
          <div class="tile" data-index="1" data-file="link1" data-name="Mod 2" data-rarity="SR">
            <div class="tile-inner"><img src="/assets/placeholder2.jpg" alt="mod2"></div>
          </div>
          <div class="tile" data-index="2" data-file="link2" data-name="Mod 3" data-rarity="R">
            <div class="tile-inner"><img src="/assets/placeholder3.jpg" alt="mod3"></div>
          </div>
          <div class="tile" data-index="3" data-file="link3" data-name="Mod 4" data-rarity="SR">
            <div class="tile-inner"><img src="/assets/placeholder4.jpg" alt="mod4"></div>
          </div>
          <div class="tile" data-index="4" data-file="link4" data-name="Mod 5" data-rarity="R">
            <div class="tile-inner"><img src="/assets/placeholder5.jpg" alt="mod5"></div>
          </div>
          <div class="tile" data-index="5" data-file="link5" data-name="Mod 6" data-rarity="SSR">
            <div class="tile-inner"><img src="/assets/placeholder6.jpg" alt="mod6"></div>
          </div>
        </div>

        <div class="panel">
          <button id="spinBtn" class="spinBtn btn big" disabled>Spin</button>
        </div>

        <div id="resultModal" class="modal hidden">
          <div class="modal-card">
            <h3 id="resultName">You got ...</h3>
            <p id="resultRarity"></p>
            <div class="modal-actions">
              <button id="downloadBtn" class="btn primary">Download</button>
              <button id="closeModal" class="btn outline">Close</button>
            </div>
          </div>
        </div>

      </div>
    </section>
  </main>

  <audio id="bgAudio" loop>
    <source src="/assets/music.mp3" type="audio/mpeg">
  </audio>

  <script src="/script.js"></script>
</body>
</html>
```

---

## File: `style.css`
```css
:root{
  --bg:#071026; /* dark blue futuristic */
  --accent:#4fc3f7;
  --muted:#9aa5b1;
  --card: rgba(255,255,255,0.04);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#e7eef8;background:var(--bg)}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:14px 28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent)}
.logo{font-weight:700;color:var(--accent)}
.controls .btn{margin-left:8px}
.btn{padding:8px 14px;border-radius:8px;border:0;cursor:pointer;background:transparent;color:inherit}
.btn.small{padding:6px 10px}
.btn.outline{border:1px solid rgba(255,255,255,0.06)}
.btn.primary{background:linear-gradient(90deg,var(--accent),#7bdff6);color:#021226}
.btn.big{font-size:18px;padding:12px 24px}
.wrap{display:flex;gap:20px;padding:30px}
.leftpanel{width:240px}
.leftpanel h2{color:var(--accent)}
.navlist{list-style:none;padding:0;color:var(--muted)}
.gacha-area{flex:1;position:relative;min-height:520px}
.slideshow{position:absolute;inset:0;z-index:0;overflow:hidden;border-radius:12px}
.slideshow img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity 1s}
.slideshow img.active{opacity:1}
.gacha-stage{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%}
.tiles{display:flex;gap:18px;transform:skewX(-20deg);}
.tile{width:160px;height:420px;background:var(--card);border-radius:6px;overflow:hidden;position:relative;box-shadow:0 8px 30px rgba(3,10,20,0.5);transition:transform 300ms}
.tile-inner{transform:skewX(20deg);height:100%;width:100%}
.tile img{height:100%;width:100%;object-fit:cover;display:block}
.tile.highlight{outline:4px solid rgba(79,195,247,0.9);transform:translateY(-12px) scale(1.02)}
.panel{margin-top:18px}
.hidden{display:none}
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(2,6,12,0.6)}
.modal-card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:28px;border-radius:14px;text-align:center;color:#eef7ff}
.modal-actions{display:flex;gap:12px;justify-content:center;margin-top:18px}

/* responsive */
@media (max-width:900px){.tiles{transform:skewX(-12deg);gap:8px}.tile{width:120px;height:320px}}
```

---

## File: `script.js`
```javascript
// CONFIG --- edit these placeholders in your repo
const YT_CHANNEL = 'https://youtube.com/your-channel'; // you'll edit later
const DOWNLOAD_API = '/api/download'; // serverless endpoints
const BG_IMAGES = ['/assets/bg1.jpg','/assets/bg2.jpg','/assets/bg3.jpg'];
const SLIDESHOW_INTERVAL = 6000; // ms

// --- UI refs
const subscribeBtn = document.getElementById('subscribeBtn');
const gachaBtn = document.getElementById('gachaBtn');
const spinBtn = document.getElementById('spinBtn');
const tilesEl = document.getElementById('tiles');
const resultModal = document.getElementById('resultModal');
const resultName = document.getElementById('resultName');
const resultRarity = document.getElementById('resultRarity');
const downloadBtn = document.getElementById('downloadBtn');
const closeModal = document.getElementById('closeModal');
const bgAudio = document.getElementById('bgAudio');
const muteBtn = document.getElementById('muteBtn');

// audio autoplay attempt
bgAudio.volume = 0.6;
function tryPlayAudio(){
  bgAudio.play().catch(()=>{ bgAudio.muted = true; });
}
tryPlayAudio();
muteBtn.addEventListener('click', ()=>{
  if(bgAudio.muted){ bgAudio.muted=false; muteBtn.textContent='ðŸ”Š'; } else { bgAudio.muted=true; muteBtn.textContent='ðŸ”ˆ'; }
});

// Slideshow
const slideshow = document.getElementById('slideshow');
BG_IMAGES.forEach((src,i)=>{
  const img = document.createElement('img'); img.src = src; if(i===0) img.classList.add('active'); slideshow.appendChild(img);
});
let slideIdx=0; setInterval(()=>{
  const imgs = slideshow.querySelectorAll('img'); imgs[slideIdx].classList.remove('active'); slideIdx = (slideIdx+1)%imgs.length; imgs[slideIdx].classList.add('active');
}, SLIDESHOW_INTERVAL);

// Subscribe handling: user must click "Subscribe" button (open channel) to enable gacha
subscribeBtn.addEventListener('click', ()=>{
  // open channel in new tab
  window.open(YT_CHANNEL, '_blank');
  // mark clicked and require 2 seconds delay (so it's not accidental)
  localStorage.setItem('subClicked', Date.now());
  setTimeout(()=>{
    checkSubscribeState();
  }, 2000);
});

function checkSubscribeState(){
  const t = localStorage.getItem('subClicked');
  if(t){
    gachaBtn.disabled = false; gachaBtn.classList.add('ready');
    subscribeBtn.textContent = 'Subscribed?';
  }
}
checkSubscribeState();

// When gacha button clicked, go to gacha area (or enable spin)
gachaBtn.addEventListener('click', ()=>{
  // scroll to gacha
  document.querySelector('.gacha-stage').scrollIntoView({behavior:'smooth'});
  spinBtn.disabled = false; spinBtn.classList.remove('disabled');
});

// SPIN logic: random pick from 6 tiles with animation
function sleep(ms){return new Promise(r=>setTimeout(r,ms));}

async function spin(){
  spinBtn.disabled = true;
  const tiles = Array.from(document.querySelectorAll('.tile'));
  const count = tiles.length;
  // choose random index
  const chosen = Math.floor(Math.random()*count);

  // animation: highlight cycling
  let cycles = 3*count + chosen; // total steps
  let idx=0;
  for(let step=0; step<cycles; step++){
    tiles.forEach(t=>t.classList.remove('highlight'));
    const cur = step % count;
    tiles[cur].classList.add('highlight');
    // slow down near end
    const delay = 40 + Math.min(400, step*4);
    await sleep(delay);
  }
  // final
  tiles.forEach(t=>t.classList.remove('highlight'));
  const winner = tiles[chosen]; winner.classList.add('highlight');

  // show modal with result
  const name = winner.dataset.name || 'Mod';
  const rarity = winner.dataset.rarity || '';
  resultName.textContent = name;
  resultRarity.textContent = rarity;
  resultModal.classList.remove('hidden');

  // generate single-use token by calling server API
  const fileKey = winner.dataset.file || ('file_'+chosen);
  try{
    const resp = await fetch(DOWNLOAD_API, {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ action:'create', fileKey })
    });
    const data = await resp.json();
    if(data && data.token){
      downloadBtn.dataset.token = data.token;
    } else {
      downloadBtn.dataset.token = '';
    }
  }catch(e){
    console.error(e); downloadBtn.dataset.token='';
  }
}

spinBtn.addEventListener('click', spin);

// download consume token
downloadBtn.addEventListener('click', async ()=>{
  const token = downloadBtn.dataset.token;
  if(!token){ alert('Download token not generated.'); return; }
  // open link to /api/download?token=...
  const win = window.open(`${DOWNLOAD_API}?token=${encodeURIComponent(token)}`, '_blank');
  // optionally mark token used on client side
});

closeModal.addEventListener('click', ()=>{ resultModal.classList.add('hidden'); spinBtn.disabled=false; });

// Initialize: enable spin if subClicked already present
if(localStorage.getItem('subClicked')){ gachaBtn.disabled=false; spinBtn.disabled=true; }

// Accessibility: allow user to customize images, names, files by editing DOM or data attributes in index.html
```

---

## File: `/api/download.js` (Vercel Serverless)
```javascript
// This is a demo serverless handler for Vercel (Node.js). It implements a tiny in-memory
// single-use token store. **Important:** In-memory store is ephemeral and not reliable for
// production. For persistent single-use tokens, connect a DB (Redis, Firestore, etc.).

const crypto = require('crypto');

// map token -> {fileUrl, used, expires}
const TOKENS = {};

// Replace these placeholder file URLs with your real links (or store them securely).
const FILE_MAP = {
  'link0': 'https://example.com/yourfile0.zip',
  'link1': 'https://example.com/yourfile1.zip',
  'link2': 'https://example.com/yourfile2.zip',
  'link3': 'https://example.com/yourfile3.zip',
  'link4': 'https://example.com/yourfile4.zip',
  'link5': 'https://example.com/yourfile5.zip',
};

function makeToken(){ return crypto.randomBytes(18).toString('hex'); }

module.exports = (req, res) => {
  if(req.method === 'POST'){
    // create token
    try{
      const body = req.body || {};
      if(body.action === 'create'){
        const fileKey = body.fileKey;
        const fileUrl = FILE_MAP[fileKey] || null;
        if(!fileUrl){
          return res.status(400).json({error:'unknown fileKey'});
        }
        const token = makeToken();
        TOKENS[token] = { fileUrl, used:false, expires: Date.now() + 1000*60*10 }; // 10 min
        return res.status(200).json({ token, expiresIn:600 });
      }
      return res.status(400).json({error:'invalid action'});
    }catch(e){
      console.error(e); return res.status(500).json({error:'server'});
    }
  }

  if(req.method === 'GET'){
    const token = req.query.token;
    if(!token) return res.status(400).send('missing token');
    const rec = TOKENS[token];
    if(!rec) return res.status(404).send('token not found or expired');
    if(rec.expires < Date.now()){ delete TOKENS[token]; return res.status(410).send('token expired'); }
    if(rec.used) return res.status(403).send('token already used');
    // mark used and redirect
    rec.used = true;
    // optional: clean up
    setTimeout(()=>{ delete TOKENS[token]; }, 1000*60);
    // redirect to actual file URL
    res.writeHead(302, { Location: rec.fileUrl });
    return res.end();
  }

  return res.status(405).send('method not allowed');
};
```

---

## Notes & Deployment
- Edit `index.html` placeholders: images under `/assets/`, music `/assets/music.mp3`, tile `data-file` values and image `src` to your own files.
- Replace `FILE_MAP` entries in `/api/download.js` with your real direct download URLs.
- The "subscribe" flow is enforced client-side by requiring the user to click the subscribe button (which opens your channel) before enabling Gacha. Without YouTube API there's no reliable way to confirm subscription â€” this approach is a practical compromise.
- For real single-use security, replace the in-memory `TOKENS` store with a persistent store (Redis/Firestore) and tighten expiry.
- Deploy: push repo to GitHub â†’ import to Vercel â†’ Vercel will auto-detect `/api` as serverless functions.

---

If kamu mau, aku bisa langsung tambahkan style / tile shapes agar mirip persis dengan 4 screenshot yang kamu kirim (diagonal sliced tiles, layered look). Aku sudah buat struktur dasar dan animasi spin â€” sebutkan kalau mau aku sempurnakan tampilan (lebih diagonal, overlay, font, atau transisi cinematic) dan aku update file di sini.
